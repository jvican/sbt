# Start from a fresh slate
> clean

# The first one will carry out an update
> update
$ exists locks/dependencies_2.12.json
$ copy-file locks/dependencies_2.12.json locks/previous-dependencies_2.12.json

# The second update must produce an identical lock file
> update
$ exists locks/dependencies_2.12.json
$ must-mirror locks/dependencies_2.12.json locks/previous-dependencies_2.12.json

# Check that the dependency lock file is not cleaned
> clean
$ exists locks/dependencies_2.12.json

# Check that update works with the dependency lock file
> update

# Check that update generates a dependency lock file (this update will be cached)
$ delete locks/dependencies_2.12.json
> update
$ exists locks/dependencies_2.12.json

# Check that when inputs are different, we get a new dependency lock file
$ copy-file locks/dependencies_2.12.json locks/previous-dependencies_2.12.json
$ copy-file changes/new-library-dependency.sbt.disabled new-library-dependency.sbt
> reload
> update
-$ must-mirror locks/dependencies_2.12.json locks/previous-dependencies_2.12.json
